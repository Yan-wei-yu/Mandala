<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ›¼é™€ç¾…ä¹å®®æ ¼æ€è€ƒæ³• (9x9 å®Œæ•´ç‰ˆ) - å¯å„²å­˜</title>
    
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    
    <style>
        /* --- åŸºç¤è¨­å®š --- */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            display: flex;
            flex-direction: column; /* å‚ç›´æ’åˆ—ï¼šæŒ‰éˆ•å’Œç¶²æ ¼ */
            align-items: center; /* æ°´å¹³ç½®ä¸­ */
            padding: 20px;
            background-color: #f0f2f5;
            min-height: 100vh;
            margin: 0;
        }

        /* --- å„²å­˜æŒ‰éˆ•æ¨£å¼ --- */
        #saveButton {
            padding: 10px 20px;
            margin-bottom: 20px; /* èˆ‡ç¶²æ ¼ä¿æŒè·é›¢ */
            font-size: 1.1em;
            font-weight: bold;
            color: white;
            background-color: #4CAF50; /* ç¶ è‰² */
            border: none;
            border-radius: 5px;
            cursor: pointer;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            transition: background-color 0.3s ease;
        }

        #saveButton:hover {
            background-color: #45a049;
        }

        /* --- ç¸½ç¶²æ ¼ (9x9) --- */
        .mandala-container {
            /* **æ³¨æ„**ï¼šç‚ºæ–¹ä¾¿åœ–ç‰‡æˆªå–ï¼Œé€™è£¡åŠ ä¸Š id="mandala-to-capture" */
            /* è¨­ç½® 9 æ¬„ 9 åˆ—çš„ç¸½ç¶²æ ¼ */
            display: grid;
            grid-template-columns: repeat(9, 1fr);
            grid-template-rows: repeat(9, 1fr);
            width: 95vmin; 
            max-width: 900px;
            aspect-ratio: 1 / 1; 
            border: 5px solid #4a90e2; 
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
            background-color: #fff;
        }

        /* --- å¤§å€å¡Š (3x3) --- */
        .big-cell {
            grid-column: span 3;
            grid-row: span 3;
            border: 2px solid #a8c8e6;
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            grid-template-rows: repeat(3, 1fr);
            background-color: #ffffff;
        }

        /* --- å°æ ¼å­ (1x1) --- */
        .small-cell {
            border: 1px dashed #cccccc;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 2px;
            box-sizing: border-box;
            min-height: 0;
            overflow: hidden; 
        }

        /* --- æ–‡å­—è¼¸å…¥å€ --- */
        .small-cell textarea {
            width: 100%;
            height: 100%;
            border: none;
            outline: none;
            resize: none;
            font-size: 0.8em;
            text-align: center;
            padding: 3px;
            box-sizing: border-box;
            background-color: transparent;
        }
        
        /* --- æ ¸å¿ƒç›®æ¨™é«˜äº® (é¡è‰²èˆ‡åŸç‰ˆç›¸åŒ) --- */
        .big-cell:nth-child(5) {
            background-color: #ffda79; 
            border: 4px solid #f6a62d; 
        }
        .small-cell:nth-child(5) {
            font-weight: bold;
            background-color: #a8dadc; 
            color: #1d3557;
            border: 2px solid #457b9d;
        }
        .big-cell:nth-child(5) .small-cell:nth-child(5) {
            background-color: #e63946; 
            color: white;
            font-size: 1.1em;
            border: 4px solid #c81d25;
        }
    </style>
</head>
<body>

    <button id="saveButton" onclick="saveMandalaAsImage()">
        ğŸ“¥ å„²å­˜ç‚ºåœ–ç‰‡ (PNG)
    </button>

    <div class="mandala-container" id="mandala-to-capture">
        <div class="big-cell">
            <div class="small-cell"><textarea placeholder="ç´°é …"></textarea></div><div class="small-cell"><textarea placeholder="ç´°é …"></textarea></div><div class="small-cell"><textarea placeholder="ç´°é …"></textarea></div>
            <div class="small-cell"><textarea placeholder="ç´°é …"></textarea></div><div class="small-cell"><textarea placeholder="æ ¸å¿ƒç›®æ¨™ 1"></textarea></div><div class="small-cell"><textarea placeholder="ç´°é …"></textarea></div>
            <div class="small-cell"><textarea placeholder="ç´°é …"></textarea></div><div class="small-cell"><textarea placeholder="ç´°é …"></textarea></div><div class="small-cell"><textarea placeholder="ç´°é …"></textarea></div>
        </div>

        <div class="big-cell">
            <div class="small-cell"><textarea placeholder="ç´°é …"></textarea></div><div class="small-cell"><textarea placeholder="ç´°é …"></textarea></div><div class="small-cell"><textarea placeholder="ç´°é …"></textarea></div>
            <div class="small-cell"><textarea placeholder="ç´°é …"></textarea></div><div class="small-cell"><textarea placeholder="æ ¸å¿ƒç›®æ¨™ 2"></textarea></div><div class="small-cell"><textarea placeholder="ç´°é …"></textarea></div>
            <div class="small-cell"><textarea placeholder="ç´°é …"></textarea></div><div class="small-cell"><textarea placeholder="ç´°é …"></textarea></div><div class="small-cell"><textarea placeholder="ç´°é …"></textarea></div>
        </div>

        <div class="big-cell">
            <div class="small-cell"><textarea placeholder="ç´°é …"></textarea></div><div class="small-cell"><textarea placeholder="ç´°é …"></textarea></div><div class="small-cell"><textarea placeholder="ç´°é …"></textarea></div>
            <div class="small-cell"><textarea placeholder="ç´°é …"></textarea></div><div class="small-cell"><textarea placeholder="æ ¸å¿ƒç›®æ¨™ 3"></textarea></div><div class="small-cell"><textarea placeholder="ç´°é …"></textarea></div>
            <div class="small-cell"><textarea placeholder="ç´°é …"></textarea></div><div class="small-cell"><textarea placeholder="ç´°é …"></textarea></div><div class="small-cell"><textarea placeholder="ç´°é …"></textarea></div>
        </div>

        <div class="big-cell">
            <div class="small-cell"><textarea placeholder="ç´°é …"></textarea></div><div class="small-cell"><textarea placeholder="ç´°é …"></textarea></div><div class="small-cell"><textarea placeholder="ç´°é …"></textarea></div>
            <div class="small-cell"><textarea placeholder="ç´°é …"></textarea></div><div class="small-cell"><textarea placeholder="æ ¸å¿ƒç›®æ¨™ 4"></textarea></div><div class="small-cell"><textarea placeholder="ç´°é …"></textarea></div>
            <div class="small-cell"><textarea placeholder="ç´°é …"></textarea></div><div class="small-cell"><textarea placeholder="ç´°é …"></textarea></div><div class="small-cell"><textarea placeholder="ç´°é …"></textarea></div>
        </div>

        <div class="big-cell">
            <div class="small-cell"><textarea placeholder="å¤–å±¤ç›®æ¨™ 1"></textarea></div><div class="small-cell"><textarea placeholder="å¤–å±¤ç›®æ¨™ 2"></textarea></div><div class="small-cell"><textarea placeholder="å¤–å±¤ç›®æ¨™ 3"></textarea></div>
            <div class="small-cell"><textarea placeholder="å¤–å±¤ç›®æ¨™ 4"></textarea></div>
            <div class="small-cell"><textarea placeholder="æœ€çµ‚æ ¸å¿ƒç›®æ¨™"></textarea></div>
            <div class="small-cell"><textarea placeholder="å¤–å±¤ç›®æ¨™ 6"></textarea></div>
            <div class="small-cell"><textarea placeholder="å¤–å±¤ç›®æ¨™ 7"></textarea></div><div class="small-cell"><textarea placeholder="å¤–å±¤ç›®æ¨™ 8"></textarea></div><div class="small-cell"><textarea placeholder="å¤–å±¤ç›®æ¨™ 9"></textarea></div>
        </div>

        <div class="big-cell">
            <div class="small-cell"><textarea placeholder="ç´°é …"></textarea></div><div class="small-cell"><textarea placeholder="ç´°é …"></textarea></div><div class="small-cell"><textarea placeholder="ç´°é …"></textarea></div>
            <div class="small-cell"><textarea placeholder="ç´°é …"></textarea></div><div class="small-cell"><textarea placeholder="æ ¸å¿ƒç›®æ¨™ 6"></textarea></div><div class="small-cell"><textarea placeholder="ç´°é …"></textarea></div>
            <div class="small-cell"><textarea placeholder="ç´°é …"></textarea></div><div class="small-cell"><textarea placeholder="ç´°é …"></textarea></div><div class="small-cell"><textarea placeholder="ç´°é …"></textarea></div>
        </div>
        
        <div class="big-cell">
            <div class="small-cell"><textarea placeholder="ç´°é …"></textarea></div><div class="small-cell"><textarea placeholder="ç´°é …"></textarea></div><div class="small-cell"><textarea placeholder="ç´°é …"></textarea></div>
            <div class="small-cell"><textarea placeholder="ç´°é …"></textarea></div><div class="small-cell"><textarea placeholder="æ ¸å¿ƒç›®æ¨™ 7"></textarea></div><div class="small-cell"><textarea placeholder="ç´°é …"></textarea></div>
            <div class="small-cell"><textarea placeholder="ç´°é …"></textarea></div><div class="small-cell"><textarea placeholder="ç´°é …"></textarea></div><div class="small-cell"><textarea placeholder="ç´°é …"></textarea></div>
        </div>
        
        <div class="big-cell">
            <div class="small-cell"><textarea placeholder="ç´°é …"></textarea></div><div class="small-cell"><textarea placeholder="ç´°é …"></textarea></div><div class="small-cell"><textarea placeholder="ç´°é …"></textarea></div>
            <div class="small-cell"><textarea placeholder="ç´°é …"></textarea></div><div class="small-cell"><textarea placeholder="æ ¸å¿ƒç›®æ¨™ 8"></textarea></div><div class="small-cell"><textarea placeholder="ç´°é …"></textarea></div>
            <div class="small-cell"><textarea placeholder="ç´°é …"></textarea></div><div class="small-cell"><textarea placeholder="ç´°é …"></textarea></div><div class="small-cell"><textarea placeholder="ç´°é …"></textarea></div>
        </div>
        
        <div class="big-cell">
            <div class="small-cell"><textarea placeholder="ç´°é …"></textarea></div><div class="small-cell"><textarea placeholder="ç´°é …"></textarea></div><div class="small-cell"><textarea placeholder="ç´°é …"></textarea></div>
            <div class="small-cell"><textarea placeholder="ç´°é …"></textarea></div><div class="small-cell"><textarea placeholder="æ ¸å¿ƒç›®æ¨™ 9"></textarea></div><div class="small-cell"><textarea placeholder="ç´°é …"></textarea></div>
            <div class="small-cell"><textarea placeholder="ç´°é …"></textarea></div><div class="small-cell"><textarea placeholder="ç´°é …"></textarea></div><div class="small-cell"><textarea placeholder="ç´°é …"></textarea></div>
        </div>
        
    </div>
    
    <script>
        function saveMandalaAsImage() {
            // é–å®šè¦æˆªåœ–çš„å…ƒç´ ï¼Œé€™è£¡ä½¿ç”¨çš„æ˜¯æ•´å€‹ç¶²æ ¼å®¹å™¨
            const element = document.getElementById('mandala-to-capture'); 
            
            // å•Ÿç”¨ html2canvas é€²è¡Œæˆªåœ–
            html2canvas(element, { 
                scale: 2, // æé«˜è§£æåº¦ï¼Œè®“åœ–ç‰‡æ›´æ¸…æ™°
                allowTaint: true, // å…è¨±è·¨åŸŸåœ–ç‰‡ (é›–ç„¶é€™è£¡æ²’ç”¨åˆ°)
                useCORS: true // å•Ÿç”¨ CORS
            }).then(function(canvas) {
                // å°‡ canvas å…ƒç´ è½‰æ›æˆåœ–ç‰‡è³‡æ–™
                const image = canvas.toDataURL('image/png');
                
                // å‰µå»ºä¸€å€‹è™›æ“¬çš„é€£çµ a å…ƒç´ 
                const link = document.createElement('a');
                
                // è¨­å®šä¸‹è¼‰æª”æ¡ˆçš„åç¨±
                link.download = 'æ›¼é™€ç¾…ä¹å®®æ ¼_' + new Date().toISOString().slice(0, 10) + '.png'; 
                
                // è¨­å®šåœ–ç‰‡è³‡æ–™ç‚ºé€£çµçš„ç›®æ¨™
                link.href = image;
                
                // æ¨¡æ“¬é»æ“Šé€£çµï¼Œè§¸ç™¼ç€è¦½å™¨ä¸‹è¼‰
                link.click();
            });
        }
    </script>

</body>
</html>